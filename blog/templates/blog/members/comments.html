{% extends 'blog/base.html' %}
{% load static %}

{% block title %}è©•è«–è¨˜éŒ„ - {{ member.name }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog/css/members/comments.css' %}">
{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <div class="header-content">
            <a href="{% url 'member_profile' username=member.username %}" class="back-link">
                <span class="back-icon">â†</span>
                è¿”å›å€‹äººé é¢
            </a>
            <h1 class="page-title">è©•è«–è¨˜éŒ„</h1>
            <p class="page-subtitle">{{ member.name }} çš„æ‰€æœ‰è©•è«– (å…± {{ total_count }} å‰‡)</p>
        </div>
    </div>
</section>

<!-- Comments Content -->
<section class="comments-content">
    <div class="container">
        <div class="comments-wrapper">
            <!-- Comments List -->
            <div class="comments-list">
                {% for comment in comments %}
                <div class="comment-card">
                    <div class="comment-header">
                        <div class="comment-info">
                            <span class="comment-icon">ğŸ’¬</span>
                            <span class="comment-label">è©•è«–æ–¼</span>
                            <a href="{% url 'article_detail' id=comment.article.id %}" class="article-link">
                                ã€Š{{ comment.article.title }}ã€‹
                            </a>
                        </div>
                        <div class="comment-date">
                            {{ comment.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}
                        </div>
                    </div>

                    <div class="comment-content">
                        <blockquote class="comment-text">
                            {{ comment.content }}
                        </blockquote>
                    </div>

                    <div class="comment-footer">
                        <div class="article-meta">
                            <span class="article-author">
                                <span class="meta-icon">âœï¸</span>
                                æ–‡ç« ä½œè€…ï¼š
                                <a href="{% url 'member_profile' username=comment.article.author.username %}" class="author-link">
                                    {{ comment.article.author.first_name|default:comment.article.author.username }}
                                </a>
                            </span>
                            <span class="article-date">
                                <span class="meta-icon">ğŸ“…</span>
                                {{ comment.article.created_at|date:"Y-m-d" }}
                            </span>
                        </div>
                        <a href="{% url 'article_detail' id=comment.article.id %}#comment-{{ comment.id }}" class="view-comment">
                            æŸ¥çœ‹è©•è«– â†’
                        </a>
                    </div>
                </div>
                {% empty %}
                <div class="empty-state">
                    <div class="empty-icon">ğŸ’¬</div>
                    <h3 class="empty-title">å°šæœªç™¼è¡¨ä»»ä½•è©•è«–</h3>
                    <p class="empty-text">{% if is_own_profile %}é–‹å§‹åƒèˆ‡è¨è«–ï¼Œåˆ†äº«ä½ çš„æƒ³æ³•å§ï¼{% else %}æœŸå¾… {{ member.name }} çš„ç²¾å½©è©•è«–{% endif %}</p>
                    {% if is_own_profile %}
                    <a href="{% url 'blog_home' %}" class="btn-primary">
                        <span class="btn-icon">ğŸ“š</span>
                        ç€è¦½æ–‡ç« 
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

            <!-- Pagination -->
            {% if page_obj.paginator.num_pages > 1 %}
            <div class="pagination">
                {% if page_obj.has_previous %}
                <a href="?page=1" class="page-link">
                    Â« é¦–é 
                </a>
                <a href="?page={{ page_obj.previous_page_number }}" class="page-link">
                    â€¹ ä¸Šä¸€é 
                </a>
                {% endif %}

                {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                <span class="page-current">
                    {{ num }}
                </span>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a href="?page={{ num }}" class="page-link">
                    {{ num }}
                </a>
                {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="page-link">
                    ä¸‹ä¸€é  â€º
                </a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="page-link">
                    æœ«é  Â»
                </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

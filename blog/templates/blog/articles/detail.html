{% extends 'blog/base.html' %}
{% load static %}
{% load blog_extras %}

{% block title %}{{ article.title }} - RuDjango{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog/css/home.css' %}">
<link rel="stylesheet" href="{% static 'blog/css/detail.css' %}">
{% endblock %}

{% block content %}
{% if messages %}
<div class="message-container">
    {% for message in messages %}
    <div
        class="message-item {% if message.tags == 'success' %}message-success{% elif message.tags == 'error' %}message-error{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="article-detail-container">
    <!-- è¿”å›æŒ‰éˆ•èˆ‡æ›é å°èˆª -->
    <div class="top-navigation-container">
        <a href="{% url 'blog_home' %}" class="back-button">â† è¿”å›åˆ—è¡¨</a>
        <div class="pagination-nav">
            {% if previous_article %}
            <a href="{% url 'article_detail' previous_article.id %}" class="nav-button prev-button"
                title="{{ previous_article.title }}">
                â† ä¸Šä¸€ç¯‡
            </a>
            {% else %}
            <span class="nav-button nav-disabled">â† ä¸Šä¸€ç¯‡</span>
            {% endif %}
            {% if next_article %}
            <a href="{% url 'article_detail' next_article.id %}" class="nav-button next-button"
                title="{{ next_article.title }}">
                ä¸‹ä¸€ç¯‡ â†’
            </a>
            {% else %}
            <span class="nav-button nav-disabled">ä¸‹ä¸€ç¯‡ â†’</span>
            {% endif %}
        </div>
    </div>

    <!-- æ–‡ç« æ¨™é¡Œå€ -->
    <div class="article-header">
        <h1>{{ article.title }}</h1>
        <div class="article-meta">
            {% if article.author %}
            <span>âœï¸ ä½œè€…ï¼š{{ article.author|author_display }}</span>
            {% endif %}
            <span>ğŸ“… ç™¼å¸ƒæ–¼ {{ article.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</span>
            {% if article.created_at != article.updated_at %}
            <span>âœï¸ æ›´æ–°æ–¼ {{ article.updated_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</span>
            {% endif %}
        </div>
    </div>

    <!-- æ–‡ç« å…§å®¹ -->
    <div class="article-content-wrapper">
        <div class="article-content">{{ article.content|markdown }}</div>
    </div>

    <!-- æ–‡ç« åº•éƒ¨ -->
    <div class="article-footer">
        <!-- æ›é å°èˆª -->
        <div class="pagination-nav-bottom">
            {% if previous_article %}
            <a href="{% url 'article_detail' previous_article.id %}" class="nav-button prev-button"
                title="{{ previous_article.title }}">
                â† ä¸Šä¸€ç¯‡
            </a>
            {% else %}
            <span class="nav-button nav-disabled">â† ä¸Šä¸€ç¯‡</span>
            {% endif %}
            {% if next_article %}
            <a href="{% url 'article_detail' next_article.id %}" class="nav-button next-button"
                title="{{ next_article.title }}">
                ä¸‹ä¸€ç¯‡ â†’
            </a>
            {% else %}
            <span class="nav-button nav-disabled">ä¸‹ä¸€ç¯‡ â†’</span>
            {% endif %}
        </div>

        <div class="footer-actions-container">
            <a href="{% url 'blog_home' %}" class="back-button">â† è¿”å›åˆ—è¡¨</a>
            {% if article.author == request.user %}
            <div class="author-actions">
                <a href="{% url 'article_edit' article.id %}" class="action-button edit-button">
                    <span class="button-icon">âœï¸</span>
                    <span class="button-text">ç·¨è¼¯</span>
                </a>
                <a href="{% url 'article_delete' article.id %}" class="action-button delete-button">
                    <span class="button-icon">ğŸ—‘ï¸</span>
                    <span class="button-text">åˆªé™¤</span>
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
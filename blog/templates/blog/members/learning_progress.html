{% extends 'blog/base.html' %}
{% load static %}

{% block title %}å­¸ç¿’é€²åº¦ - {{ member.name }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog/css/members/learning_progress.css' %}">
{% endblock %}

{% block content %}
<!-- é é¢æ¨™é¡Œ -->
<div class="learning-header">
    <div class="container">
        <a href="{% url 'member_profile' username=member.username %}" class="back-link">â† è¿”å›å€‹äººè³‡æ–™</a>
        <h1 class="page-title">ğŸ“š å­¸ç¿’é€²åº¦</h1>
        <p class="page-subtitle">{{ member.name }} çš„é–±è®€çµ±è¨ˆèˆ‡å­¸ç¿’æ­·ç¨‹</p>
    </div>
</div>

<!-- çµ±è¨ˆå¡ç‰‡ -->
<section class="stats-overview">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“–</div>
                <div class="stat-info">
                    <div class="stat-value">{{ total_articles_read }}</div>
                    <div class="stat-label">å·²é–±è®€æ–‡ç« </div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ”„</div>
                <div class="stat-info">
                    <div class="stat-value">{{ total_read_count }}</div>
                    <div class="stat-label">ç¸½é–±è®€æ¬¡æ•¸</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â±ï¸</div>
                <div class="stat-info">
                    <div class="stat-value">{{ reading_hours }}h {{ reading_minutes }}m</div>
                    <div class="stat-label">ç¸½é–±è®€æ™‚é•·</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âœï¸</div>
                <div class="stat-info">
                    <div class="stat-value">{{ author_progress|length }}</div>
                    <div class="stat-label">é–±è®€ä½œè€…æ•¸</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ä¸»è¦å…§å®¹ -->
<section class="main-content">
    <div class="container">
        <div class="content-grid">
            <!-- å·¦å´ï¼šä½œè€…é€²åº¦ -->
            <div class="left-column">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ“Š å„ä½œè€…é–±è®€é€²åº¦</h2>
                    </div>
                    <div class="card-body">
                        {% if author_progress %}
                        <div class="author-progress-list">
                            {% for progress in author_progress %}
                            <div class="author-progress-item">
                                <div class="author-info">
                                    <div class="author-name">{{ progress.author }}</div>
                                    <div class="author-stats">{{ progress.read }} / {{ progress.total }} ç¯‡</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: {{ progress.progress }}%; background: {{ progress.color }};"></div>
                                    </div>
                                    <div class="progress-percent">{{ progress.progress }}%</div>
                                </div>
                                {% if progress.progress == 100 %}
                                <div class="completion-badge">âœ“ å·²å®Œæˆ</div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="empty-message">å°šæœªé–‹å§‹é–±è®€ä»»ä½•æ–‡ç« </p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- å³å´ï¼šæœ€è¿‘é–±è®€ -->
            <div class="right-column">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ•’ æœ€è¿‘é–±è®€</h2>
                    </div>
                    <div class="card-body">
                        {% if recent_reads %}
                        <div class="recent-reads-list">
                            {% for read in recent_reads %}
                            <div class="read-item">
                                <a href="{% url 'article_detail' id=read.article.id %}" class="read-link">
                                    <div class="read-header">
                                        <h3 class="read-title">{{ read.article.title }}</h3>
                                        <div class="read-badge">
                                            {% if read.read_count > 1 %}
                                            <span class="badge-count">é–±è®€ {{ read.read_count }} æ¬¡</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="read-meta">
                                        <span class="read-author">âœï¸ {{ read.article.author.first_name|default:read.article.author.username }}</span>
                                        <span class="read-time">ğŸ“… {{ read.last_read_at|date:"Y-m-d H:i" }}</span>
                                    </div>
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="empty-message">å°šç„¡é–±è®€è¨˜éŒ„</p>
                        {% endif %}
                    </div>
                </div>

                <!-- å­¸ç¿’å»ºè­° -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ’¡ å­¸ç¿’å»ºè­°</h2>
                    </div>
                    <div class="card-body">
                        <div class="tips-list">
                            <div class="tip-item">
                                <div class="tip-icon">ğŸ¯</div>
                                <div class="tip-content">
                                    <p class="tip-title">è¨­å®šç›®æ¨™</p>
                                    <p class="tip-desc">æ¯é€±é–±è®€ 3-5 ç¯‡æ–‡ç« ï¼Œé¤Šæˆè‰¯å¥½å­¸ç¿’ç¿’æ…£</p>
                                </div>
                            </div>
                            <div class="tip-item">
                                <div class="tip-icon">ğŸ“</div>
                                <div class="tip-content">
                                    <p class="tip-title">åšç­†è¨˜</p>
                                    <p class="tip-desc">è¨˜éŒ„é‡é»å…§å®¹ï¼ŒåŠ æ·±ç†è§£èˆ‡è¨˜æ†¶</p>
                                </div>
                            </div>
                            <div class="tip-item">
                                <div class="tip-icon">ğŸ”„</div>
                                <div class="tip-content">
                                    <p class="tip-title">è¤‡ç¿’</p>
                                    <p class="tip-desc">å®šæœŸå›é¡§å·²è®€æ–‡ç« ï¼Œéå›ºçŸ¥è­˜</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
